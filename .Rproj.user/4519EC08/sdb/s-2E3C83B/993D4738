{
    "contents" : "library(lda)\nlibrary(ggplot2)\n\nset.seed(8675309)\n\nload('data.RData')\nreviews.vocab <- readRDS('vocab.Rdata')\n\n#Our data\n\nreviews.documents <- lexicalize(data$text, vocab = reviews.vocab)\nreviews.ratings <- data$players_rank\nnum.topics <- 20\n\n\n## Initialize the params\nparams <- sample(c(-0.001, 0.001), num.topics, replace=TRUE)\n\nresult <- slda.em(documents = reviews.documents,\n                   K = num.topics,\n                   vocab = reviews.vocab,\n                   num.e.iterations = 5,\n                   num.m.iterations = 4,\n                   alpha = 1.0,\n                   eta = 0.1,\n                   annotations = reviews.ratings,\n                   params = params,\n                   variance = 0.25,\n                   lambda = 1.0,\n                   logistic = FALSE,\n                   regularise = FALSE,\n                   method = \"sLDA\",\n                   trace = 5L)\n\nTopics <- apply(top.topic.words(result$topics, 5, by.score=TRUE),\n                 2, paste, collapse=\" \")\n\n\ncoefs <- cbind(coefs, Topics=factor(Topics, Topics[order(coefs$Estimate)]))\ncoefs <- coefs[order(coefs$Estimate),]\n\nqplot(Topics,\n      Estimate,\n      colour=Estimate,\n      size=abs(t.value),\n      data=coefs) +\n      geom_errorbar(width=0.5,\n                    aes(ymin=Estimate-Std..Error,\n                        ymax=Estimate+Std..Error)) +\n      coord_flip()\n\npredictions <- slda.predict(poliblog.documents,\n                            result$topics, \n                            result$model,\n                            alpha = 1.0,\n                            eta=0.1)\n\nqplot(predictions,\n        fill = factor(poliblog.ratings),\n        xlab = \"predicted rating\",\n        ylab = \"density\",\n        alpha = I(0.5),\n        geom =\"density\") +\n        geom_vline(aes(xintercept=0)) \n",
    "created" : 1433327131226.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1066116996",
    "id" : "993D4738",
    "lastKnownWriteTime" : 1433327117,
    "path" : "C:/Users/cs22/workspace/refimpact/R/slda_example.R",
    "project_path" : "R/slda_example.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}